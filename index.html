<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter à l'Agenda</title>
    <script>
        function redirectToCalendar() {
            let eventTitle = encodeURIComponent("Réunion");
            let eventDetails = encodeURIComponent("Discussion importante");
            let eventLocation = encodeURIComponent("Bureau");
            let startDate = "20250320T130000Z";
            let endDate = "20250320T140000Z";

            let googleLink = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${eventTitle}&dates=${startDate}/${endDate}&details=${eventDetails}&location=${eventLocation}`;
            let outlookLink = `https://outlook.live.com/calendar/0/deeplink/compose?subject=${eventTitle}&startdt=2025-03-20T14:00:00&enddt=2025-03-20T15:00:00&body=${eventDetails}&location=${eventLocation}`;
            let icsFile = "https://racinglife01.github.io/calendar-link/event.ics"; // Lien correct

            setTimeout(() => {
                if (navigator.userAgent.includes("iPhone") || navigator.userAgent.includes("iPad") || navigator.userAgent.includes("Mac OS")) {
                    window.location.replace(icsFile); // Apple Calendrier
                } else if (navigator.userAgent.includes("Android")) {
                    window.location.replace(googleLink); // Google Agenda
                } else {
                    document.getElementById("google").href = googleLink;
                    document.getElementById("outlook").href = outlookLink;
                    document.getElementById("ics").href = icsFile;
                    document.getElementById("options").style.display = "block";
                }
            }, 500); // Petit délai pour éviter les blocages
        }
    </script>
</head>
<body onload="redirectToCalendar()">
    <div id="options" style="display: none;">
        <p>Choisissez votre agenda :</p>
        <a id="google" href="#">Google Agenda</a> | 
        <a id="outlook" href="#">Outlook</a> | 
        <a id="ics" href="#">Apple Calendrier (.ics)</a>
    </div>
</body>
</html>
